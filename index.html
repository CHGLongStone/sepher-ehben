<html lang="en" >
<head>
	
	<title>sepher ehben</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/2.6.4/svg.js"></script>

	<!--
	<script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/2.6.4/svg.min.js"></script>
	<script src="/assets/scripts/nsts-svgmap.js"></script>
	-->
	<script src="assets/plugins/jquery.min.js"></script>
	<script src="assets/scripts/svg-pan-zoom.js"></script>


</head>
<body>

				<div id="notification" name="notification" class="form-group">
				</div>
<!--
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
    <polygon points="50 15, 100 100, 0 100"/>
</svg>

-->
















	<script >
		var draw = SVG('notification').size(400, 400).attr({id:"svg_id"}).scale(1, -1);
		
		var xtl = -200;
		var ytl = 200;
		var xbr = 200;
		var ybr = -200;

		function denada(){
			console.log('denada');
			return null;
		}
	
		var worldXTotal = Math.abs(xtl) + Math.abs(xbr);
		var worldYTotal = Math.abs(ytl) + Math.abs(ybr); 		
		/**

		
		0,0	30* 	28.9006920332
			90*		43.4194656807
			60*		28.9006920332
			90*		
		
		
		
		*/
		var baseShape = {
			"origin" : {
				"x" : Math.abs(xtl),
				"y" : Math.abs(ytl)
			},
			"long": 100.25,
			"short": 57.6,
			"lines": {
				"A": {
					"angle": 30,

					//"distance": 29.1034362232,
				},
				"B": {
					"angle": 120,
					//"distance": 43.4194656807,
				},
				"C": {
					"angle": 240,
					//"distance": 43.4194656807,
				},
				"D": {
					"angle": 330,
					//"angle": 120,
					//"distance": 27.9006920332,
				},
				/*
				"E": {
					"angle": 320,
					//"angle": 120,
					//"distance": 27.9006920332,
				}
				*/
				
			}
		};
		
		moveX = 100;
		moveY = 100;
		var box = draw.viewbox(Math.abs(xtl), Math.abs(ytl), 100, 100);
		var zoom = box.zoom;
		var defs = draw.defs();
		var pattern = defs.pattern()
		pattern.attr({id:"grid", width:"10", height:"10", patternUnits:"userSpaceOnUse"});
		pattern.rect().attr({width:"100", height:"100", fill:"none"});
		pattern.path().attr({d:"M 100 0 L 0 0 0 100", fill:"none", stroke:"black", "stroke-width":"1"});
		console.log('-------');

		//draw.rect().attr({id:"grid_fill", width:"100%", height:"100%", fill:"url(#grid)"});
		draw.rect().attr({id:"grid_fill", width:worldXTotal, height:worldYTotal, fill:"url(#grid)"});
		lineSpacing = 5;
		
		fillStart = 606;
		coursesIdx = 0;
		startY = -50;
		startX = -50;
		//fillVal = {coursesIdx:fillStart};

		grid_fill = SVG.get('grid_fill');
		groupContainer = draw.group().attr({id:"groupContainer"});
		/**
		heightMapPath = "/assets/images/heightmap_"+data.result.data[Object.keys(data.result.data)[0]].world+".svg";
		
		groupContainer.image(heightMapPath,worldXTotal, worldYTotal).attr({ opacity: 0.6 }).back();//.rotate(270);
		courseRotation = parseInt(value2.transform.rotation.z);
		
X=distance*cos(angle) +x0

Y=distance*sin(angle) +y0

		*/
		
		//draw.rect().attr({id:"grid_fill", width:500, height:500, fill:"url(#grid)"});
		
		
		group = groupContainer.group().attr({id:"abstraction"});
		lastPosition = baseShape.origin;
		i = 1;
		var line = [];
		
		moveX = -50 + Math.abs(xtl);
		moveY = -50 + Math.abs(ytl);
		var rect = group.rect(100, 100).fill({color: '#f06', opacity: 0.6}).move(moveX, moveY);
		var rectTL = group.rect(10, 10).fill('#f06').move(0, 0);
		var rectBL = group.rect(10, 10).fill('#f06').move(390, 390);
		/***********************/
		/***********************/
		distance = baseShape.short;
		coords = {
			"x1": 0,
			"y1": 0,
			"x2": 0,
			"y2": 0,
		};
		/**********************
		plotVal = [
			[coords.x1+Math.abs(xtl),coords.y1+Math.abs(ytl)], 
			[coords.x2+Math.abs(xtl),coords.y2+Math.abs(ytl)]
		];
		group.line(plotVal).fill('none').stroke({ width: 1, color: '#080' }).attr({id:"line_FFS"});
		*/
		
		/***********************/
		var RadianAngle = (baseShape.lines.A.angle * Math.PI / 180);
		coords = {
			"x1": 0,
			"y1": 0,
			"x2": (baseShape.short * Math.cos(RadianAngle)) + coords.x1,
			"y2": (baseShape.short * Math.sin(RadianAngle)) + coords.y1,
		};
		plotVal = [
			[coords.x1+Math.abs(xtl),coords.y1+Math.abs(ytl)], 
			[coords.x2+Math.abs(xtl),coords.y2+Math.abs(ytl)]
		];
		group.line(plotVal).fill('none').stroke({ width: 1, color: '#006' }).attr({id:"line_FFS_01"});
		
		/***********************/
		var RadianAngle = (baseShape.lines.B.angle * Math.PI / 180);
		coords = {
			"x1": coords.x2,
			"y1": coords.y2,
			"x2": (baseShape.long * Math.cos(RadianAngle)) + coords.x2,
			"y2": (baseShape.long * Math.sin(RadianAngle)) + coords.y2,
		};
		plotVal = [
			[coords.x1+Math.abs(xtl),coords.y1+Math.abs(ytl)], 
			[coords.x2+Math.abs(xtl),coords.y2+Math.abs(ytl)]
		];
		group.line(plotVal).fill('none').stroke({ width: 1, color: '#008' }).attr({id:"line_FFS_02"});
		
		/***********************/
		var RadianAngle = (baseShape.lines.C.angle * Math.PI / 180);
		coords = {
			"x1": coords.x2,
			"y1": coords.y2,
			"x2": (baseShape.long * Math.cos(RadianAngle)) + coords.x2,
			"y2": (baseShape.long * Math.sin(RadianAngle)) + coords.y2,
		};
		plotVal = [
			[coords.x1+Math.abs(xtl),coords.y1+Math.abs(ytl)], 
			[coords.x2+Math.abs(xtl),coords.y2+Math.abs(ytl)]
		];
		group.line(plotVal).fill('none').stroke({ width: 1, color: '#00a' }).attr({id:"line_FFS_03"});
		
		/***********************/
		var RadianAngle = (baseShape.lines.D.angle * Math.PI / 180);
		coords = {
			"x1": coords.x2,
			"y1": coords.y2,
			"x2": (baseShape.short * Math.cos(RadianAngle)) + coords.x2,
			"y2": (baseShape.short * Math.sin(RadianAngle)) + coords.y2,
		};
		plotVal = [
			[coords.x1+Math.abs(xtl),coords.y1+Math.abs(ytl)], 
			[coords.x2+Math.abs(xtl),coords.y2+Math.abs(ytl)]
		];
		group.line(plotVal).fill('none').stroke({ width: 1, color: '#00a' }).attr({id:"line_FFS_04"});
		
		
		
		/**
		plotVal = [
			[parseFloat(lastPosition.x),parseFloat(lastPosition.y)], 
			[parseFloat(x),parseFloat(y)]
		];
		line1 = group.line(plotVal).fill('none').stroke({ width: 1, color: '#333' }).attr({id:"line_"+index+"_"+i});
		
		*/
		coords = {
			"x1": 0,
			"y1": 0,
			"x2": 0,
			"y2": 0,
		};
		plotVal = [
			[coords.x1+Math.abs(xtl),coords.y1+Math.abs(ytl)], 
			[coords.x2+Math.abs(xtl),coords.y2+Math.abs(ytl)]
		];		
		while(parseInt(baseShape.long) > 10){
			console.log('=============================');
		
			$.each(baseShape.lines, function( index, value ) {
				setTimeout(denada, 2000);
				//console.log('');
				//console.log('index'+index);
				//console.log("value:"+JSON.stringify(value, null, 2));
				var RadianAngle = (value.angle * Math.PI / 180);

				
				console.log('index: '+index);
				if("B" == index || "C" == index){
					distance = baseShape.long;
					console.log('distance: baseShape.long '+distance);
				}else{
					distance = baseShape.short;
					console.log('distance:baseShape.short '+distance);
				}

				coords = {
					"x1": coords.x2,
					"y1": coords.y2,
					"x2": (distance * Math.cos(RadianAngle)) + coords.x2,
					"y2": (distance * Math.sin(RadianAngle)) + coords.y2,
				};
				plotVal = [
					[coords.x1+Math.abs(xtl),coords.y1+Math.abs(ytl)], 
					[coords.x2+Math.abs(xtl),coords.y2+Math.abs(ytl)]
				];
				line[i] = group.line(plotVal).fill('none').stroke({ width: 1, color: '#333' }).attr({id:"line_"+index+"_"+i});
	
				console.log("coords:"+JSON.stringify(coords, null, 2));
				//console.log("plotVal:"+JSON.stringify(plotVal, null, 2));
				if('C' == index ){
					baseShape.long = (parseFloat(baseShape.long) - lineSpacing);
					baseShape.short = (parseFloat(baseShape.long) - lineSpacing);
					//console.log("baseShape:"+JSON.stringify(baseShape, null, 2));
					console.log("SHORTEN: "+lineSpacing);
				}				
				//line[i].animate(1500).plot(plotVal);
				
				//console.log("lastPosition:"+JSON.stringify(lastPosition, null, 2));
				/**
				if('A' == index && 0 == lastPosition.x){
					baseShape.lines["A"].angle = 40;
				
				}
				lastPosition = {
					"x" : x ,
					"y" : y ,
				};
				*/
				//console.log("lastPosition:"+JSON.stringify(lastPosition, null, 2));
				//baseShape.lines[index].distance = (parseFloat(baseShape.lines[index].distance) - lineSpacing);
				console.log("baseShape.lines["+index+"]:"+JSON.stringify(baseShape.lines[index], null, 2));

				
			});
			//group.animate(1500).plot(plotVal);
				i++;
				console.log("baseShape:"+JSON.stringify(baseShape, null, 2));
				
		}
		
		
		
		//leftSightLine = group.line(moveX, moveY, (xPoint+moveX), (yPoint+moveY)).stroke({ width: 10 });
		//var polyline = group.polyline([0,0, 25,14.5, 0,50, -25,14.75, -3.5,2]).animate().fill('none').stroke({ width: 1 });

		
		draw.size(500, 500);
		boxSettings = box.attr('viewBox').split(" ");
		console.log('boxSettings'+JSON.stringify(boxSettings, null, 2));
		viewSettings = moveX+' '+moveY+' '+boxSettings[2]+' '+boxSettings[3];
		viewSettings = startX+' '+startY+' 500 500';

		box.attr({viewBox: viewSettings});
		//var line = group.polyline().fill('none').stroke({ width: 1 });
		
		//line.animate(1000).plot([[0,0], [25,14.5], [0,50], [-25,14.75], [-3.5,2]]).stroke({ width: 1 });
		//line.animate(3000).plot([[0,0], [25,14.5], [0,50], [-25,14.75], [-3.5,2]]);
		
		
		
		$(function() {

		  panZoomInstance = svgPanZoom('#svg_id', {
			zoomEnabled: true,
			controlIconsEnabled: true,
			fit: true,
			center: false,
			minZoom: 0.001,
			maxZoom: 800
		  });
		  
		  // zoom out
		  panZoomInstance.zoom(2)
			
		  $('#move').on('click', function() {
			// Pan by any values from -80 to 80
			panZoomInstance.panBy({x: Math.round(Math.random() * 160 - 80), y: Math.round(Math.random() * 160 - 80)})
		  });
		});
	</script>












</body>

<!-- 
https://www.comsol.com/blogs/how-to-build-a-parameterized-archimedean-spiral-geometry/

bisected equilateral 

0	100
100	100
50	100
75	57.5
25	57.7
50	72.75
50	14.75
center points
75	85.5
25	85.5
50	40

-->

